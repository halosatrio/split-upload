<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Split Upload</title>
</head>

<body>
  <div>
    <form>
      <input type="file" id="input-file" accept="image/png, image/jpeg, .pdf" />
      <button id="btn-upload">Upload</button>
    </form>
  </div>

  <p>File size: <span id="file-size">0</span></p>
  <p>Chunk count: <span id="chunk-count">0</span></p>
  <p>File uploaded count: <span id="uploaded-count">0</span></p>

</body>

<script type="text/javascript">
  console.log("Hello world")

  const CHUNK_SIZE = 512 * 1000    // 512kb
  let selectedFile = null
  const inputEl = document.getElementById("input-file")
  inputEl.addEventListener("change", handleFiles, false)


  function handleFiles() {
    let fileList = this.files
    selectedFile = fileList[0]
    let fileSize = selectedFile.size
    let fullChunks = Math.floor(fileSize / CHUNK_SIZE)
    let remainedChunk = fileSize % CHUNK_SIZE

    const fileSizeEl = document.getElementById("file-size")
    fileSizeEl.innerHTML = "File size:" + fileSize

    const chunkCountEl = document.getElementById("chunk-count")
    chunkCountEl.innerHTML = "Count count:" + fullChunks
  }

  async function handleClickUpload() {
    const singleUploadURL = "http://localhost:8080/upload"
    const chunkUploadURL = "http://localhost:8080/chunk-upload"
  }


</script>

</html>